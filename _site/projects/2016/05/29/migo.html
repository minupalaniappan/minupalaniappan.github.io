<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Scaling Django to build an awesome search engine</title>
  <meta name="description" content="Migo is a search engine that lets you find philanthropy events near you">
  <link href='https://fonts.googleapis.com/css?family=Karla:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://minupalaniappan.com/projects/2016/05/29/migo.html">
  <link rel="alternate" type="application/rss+xml" title="MSP" href="http://minupalaniappan.com/feed.xml">
</head>


  <body>

    <header class="site-header">
  <meta name="description" content="Minu Palaniappan: A founder at UC Discourse">
  <meta name="keywords" content="minupalaniappan, minupalaniappan design, minupalaniappan studio, minupalaniappanweb design and development, web design and development, responsive design, UI design, mobile app design, icon design, logo and identity systems, logo, print design, graphic, design, graphic design, graphic designer, web design, web designer, app design, app designer, interactive, interaction, user interface, UI, user experience, UX, typography, pattern, pattern designer, pattern design, textile, textile designer, textile design, front-end developer, developer, css, css3, html, html5, wordpress, blog design, blog development, California, Silicon Valley, Davis, portfolio, projects, angularfire, firebase, django, fullstack, sundar, palo alto, sunnyvale, ucdiscourse, founder, jekyll, nba, warriors, pheonix, suns, spurs, san antonio">

  <div class="wrapper">
    <a class="site-title" href="/">MSP</a>
    
      
      <a class="page-link" href="mailto:mspal@ucdavis.edu">Inbox me</a>
      
    
      
    
      
    
      
    
  </div>
  <script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-67741779-1', 'auto');
	ga('send', 'pageview');
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="padding80">
  <header>
    <h2>Scaling Django to build an awesome search engine</h2>
    <p class = "small"><time datetime="2016-05-29T00:00:00-07:00">May 29, 2016</time></p>
  </header>
  <div>
    <p>Migo is a search engine that lets you find philanthropy events near you</p>

<h3 id="source">Source</h3>
<ul>
  <li><a href="https://github.com/minupalaniappan/migo">Github code</a></li>
</ul>

<h3 id="how-it-got-started">How it got started</h3>

<p>Migo was a hack I wrote for Bronco Hack, the official Santa Clara University Hackathon. At the time of the hackathon, I was playing around with Django and wanted to implement the framework in a 24 hour period. This hackathon was the perfect time play around with it.</p>

<h3 id="the-development-proccess">The development proccess</h3>

<ul>
  <li>Routing
Django, like most python frameworks, allows you to route your params to a function. In Django, GET params are routed like so…</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">url</span><span class="p">(</span><span class="s">r'^search/(?P&lt;searchterm&gt;[</span><span class="err">\</span><span class="s">w|</span><span class="err">\</span><span class="s">W]+)/1/(?P&lt;page&gt;</span><span class="err">\</span><span class="s">w+)/'</span><span class="p">,</span> <span class="s">'migoapp.views.spec'</span><span class="p">),</span>
<span class="n">url</span><span class="p">(</span><span class="s">r'^search/(?P&lt;searchterm&gt;[</span><span class="err">\</span><span class="s">w|</span><span class="err">\</span><span class="s">W]+)/(?P&lt;startyear&gt;</span><span class="err">\</span><span class="s">w+)-</span><span class="err">
</span><span class="s">(?P&lt;startmonth&gt;</span><span class="err">\</span><span class="s">w+)-(?P&lt;startday&gt;</span><span class="err">\</span><span class="s">w+)/(?P&lt;endyear&gt;</span><span class="err">\</span><span class="s">w+)-</span><span class="err">
</span><span class="s">(?P&lt;endmonth&gt;</span><span class="err">\</span><span class="s">w+)-(?P&lt;endday&gt;</span><span class="err">\</span><span class="s">w+)/2/(?P&lt;page&gt;</span><span class="err">\</span><span class="s">w+)/'</span><span class="p">,</span>
<span class="s">'migoapp.views.spec2'</span><span class="p">),</span>
</code></pre>
</div>

<p>These are two different routes; one takes <code class="highlighter-rouge">searchterm</code> and fetches the specific <code class="highlighter-rouge">page</code> in the list of results.
The nex route is a little more specific; this time, it takes <code class="highlighter-rouge">startday</code>, <code class="highlighter-rouge">startyear</code>, 	<code class="highlighter-rouge">startmonth</code> and the respect end variables.</p>

<ul>
  <li>API Calls</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">spec2</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">searchterm</span><span class="p">,</span> <span class="n">startyear</span><span class="p">,</span> <span class="n">startmonth</span><span class="p">,</span>
<span class="n">startday</span><span class="p">,</span> <span class="n">endyear</span><span class="p">,</span> <span class="n">endmonth</span><span class="p">,</span> <span class="n">endday</span><span class="p">,</span> <span class="n">page</span><span class="p">):</span>
	<span class="n">city</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">searchterm</span><span class="p">)</span>
  	<span class="n">tempurl</span> <span class="o">=</span> <span class="s">'http://127.0.0.1:8000/search/'</span> <span class="o">+</span> <span class="n">searchterm</span> <span class="o">+</span> <span class="s">'/'</span>
  	<span class="nb">str</span> <span class="o">=</span> <span class="s">'https://www.eventbriteapi.com/v3/events/search/?'</span>
  	<span class="nb">str</span> <span class="o">+=</span> <span class="s">'token=4FDXOHJM6UTWIHWH76TA&amp;format=json&amp;q=volunteer&amp;venue.city='</span>
  	<span class="n">response</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s">''</span> <span class="o">+</span> <span class="n">city</span> <span class="o">+</span> <span class="s">'&amp;start_date.range_start='</span>
  	<span class="o">+</span> <span class="n">startyear</span> <span class="o">+</span> <span class="s">'-'</span> <span class="o">+</span> <span class="n">startmonth</span> <span class="o">+</span> <span class="s">'-'</span> <span class="o">+</span> <span class="n">startday</span> <span class="o">+</span> <span class="s">'T00:00:00Z'</span>
  	<span class="o">+</span> <span class="s">'&amp;start_date.range_end='</span> <span class="o">+</span> <span class="n">endyear</span> <span class="o">+</span> <span class="s">'-'</span>
  	<span class="o">+</span> <span class="n">endmonth</span> <span class="o">+</span> <span class="s">'-'</span> <span class="o">+</span> <span class="n">endday</span> <span class="o">+</span> <span class="s">'T00:00:00Z'</span> <span class="o">+</span> <span class="s">'&amp;page='</span> <span class="o">+</span> <span class="n">page</span><span class="p">);</span>
  	<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</code></pre>
</div>

<p>Once these functions were properly routed, we would like to call the proper APIs. As you can see, our data source of choice was Eventbrite. So once the url was built with the parameters passed into <code class="highlighter-rouge">spec2</code>, we would convert the returned output to JSON. At this point, handling the JSON with Jinja on the front-end was simple.</p>

<ul>
  <li>Front-end</li>
</ul>

<p>There were only two templates used for this project. The search page included a big input field similar to what you would see on Google’s homepage. The results page is where there was significant thought put into design. Providing visuals on that page was important to me, so I decided to implement Google Maps to provide more relatibility for the user.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span><span class="o">&gt;</span>
<span class="kd">function</span> <span class="nx">initialize</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">mapCanvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'map'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">center</span><span class="p">:</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="s2">""</span><span class="p">,</span><span class="s2">""</span><span class="p">),</span>
      <span class="na">zoom</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="na">mapTypeId</span><span class="p">:</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">MapTypeId</span><span class="p">.</span><span class="nx">ROADMAP</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="nx">mapCanvas</span><span class="p">,</span> <span class="nx">mapOptions</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">addDomListener</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s1">'load'</span><span class="p">,</span> <span class="nx">initialize</span><span class="p">);</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre>
</div>

<p>I fetched the latitude and longitude from the evenbrite data and injected it into a JS object. Thats what <code class="highlighter-rouge">events.0.lat</code> and <code class="highlighter-rouge">events.0.lon</code> are in this case.</p>

<ul>
  <li>In Competition</li>
</ul>

<p>Migo worked fairly well, although applying some sort of Cache via Redis could have really made the technology more impressive. Broncohack had some great projects, so beating out competition proved to be tough.</p>

<p>Thanks for reading!</p>

  </div>
  <footer>
  	<a href="">Go up</a>
  </footer>

</article>
      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class = "small">Me</li>
          <li><a href="mailto:mspal@ucdavis.edu">mspal@ucdavis.edu</a></li>
          <li><a href="/resume/2016.pdf">Resume</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          <li class = "small">Me online</li>
          
          <li>
            <a href="https://github.com/minupalaniappan"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">minupalaniappan</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/minupalaniappan"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">minupalaniappan</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <li style = "list-style-type: none" class = "small">Me at school</li>
        <p>I am a second year student at the University of the California, Davis pursuing a double major in Design and Computer Science.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
